template(name="globalSearchHeaderBar")
  h1
    i.fa.fa-search
    | {{_ 'globalSearch-title'}}

template(name="globalSearchModalTitle")
  h2
    i.fa.fa-keyboard-o
    | {{_ 'globalSearch-title'}}

template(name="globalSearch")
  .wrapper
    form.js-search-query-form
      input(type="text" name="searchQuery" placeholder="{{_ 'search-example'}}" autofocus dir="auto")
    if searching.get
      +spinner
    else if hasResults.get
      .global-search-dueat-list-wrapper
        h1
          if $eq resultCount.get 0
            | {{_ 'no-results' }}
          else if $eq resultCount.get 1
            | {{_ 'one-result' }}
          else
            | {{_ 'n-results' resultsCount.get }}
        if queryErrors.get
          div
            each msg in errorMessages
              span.global-search-error-messages
                | {{_ msg.tag msg.value }}
        each card in results
          .global-search-card-wrapper
            a.minicard-wrapper.card-title(href=card.absoluteUrl)
              +minicard(card)
              //= card.title
            ul.global-search-context-list
              li.global-search-context(title="{{_ 'board'}}")
                +viewer
                  = card.getBoard.title
              li.global-search-context.global-search-context-separator
                = ' '
                | {{_ 'context-separator'}}
                = ' '
              li.global-search-context(title="{{_ 'swimlane'}}")
                +viewer
                  = card.getSwimlane.title
              li.global-search-context
                = ' '
                | {{_ 'context-separator'}}
                = ' '
              li.global-search-context(title="{{_ 'list'}}")
                +viewer
                  = card.getList.title
    else
      h2 Search Operators
      +viewer
        = '*  `@`username\n'
        = '*  `#`label\n'
        = '*  `board:`<name> or `board:`"<name>"\n'
        = '*  `swimlane:`<name> or `swimlane:`"<name>"\n'
        = '*  `list:`<name> or `list:`"<name>"\n'

template(name="globalSearchViewChangePopup")
  ul.pop-over-list
    li
      with "globalSearchViewChange-choice-me"
        a.js-global-search-view-me
          i.fa.fa-user.colorful
          | {{_ 'globalSearchViewChange-choice-me'}}
          if $eq Utils.globalSearchView "me"
            i.fa.fa-check
    li
      with "globalSearchViewChange-choice-all"
        a.js-global-search-view-all
          i.fa.fa-users.colorful
          | {{_ 'globalSearchViewChange-choice-all'}}
          span.sub-name
            +viewer
              | {{_ 'globalSearchViewChange-choice-all-description' }}
          if $eq Utils.globalSearchView "all"
            i.fa.fa-check
